(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{7203:(e,t,s)=>{Promise.resolve().then(s.bind(s,1953))},1953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),n=s(2115),i=s(6046),r=s(8118),l=s(9395),c=s(8056),o=s(3406);function d(e){let{params:t}=e,s=(0,n.use)(t),d=(0,i.useRouter)(),[u,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(!0),[x,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{if(g(!0),!localStorage.getItem("auth_token")){f("Authentication required. Please log in.");return}let e=await c.Ay.get("".concat(o.J).concat(o.Q.PRODUCTS,"/").concat(s.id));m(e.data)}catch(e){console.error("Fetch error:",e),e instanceof Error&&e.message.includes("401")?f("Authentication failed. Please log in again."):f(e instanceof Error?e.message:"An error occurred while fetching the product")}finally{g(!1)}})()},[s.id]);let p=async e=>{try{if(g(!0),f(null),!localStorage.getItem("auth_token")){f("Authentication required. Please log in.");return}await c.Ay.put("".concat(o.J).concat(o.Q.PRODUCTS,"/").concat(null==u?void 0:u.slug),{...e,slug:null==u?void 0:u.slug}),d.push("/admin/products")}catch(e){console.error("Submit error:",e),e instanceof Error&&e.message.includes("401")?f("Authentication failed. Please log in again."):f(e instanceof Error?e.message:"Failed to update product")}finally{g(!1)}};if(x)return(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:x}),x.toLowerCase().includes("log in")&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{onClick:()=>d.push("/login"),className:"text-sm font-medium text-red-800 underline hover:text-red-600",children:"Go to Login"})})]})})});if(h||!u)return(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(l.k,{className:"w-8 h-8"})});let{...j}=u;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:"Edit Product"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Update the product by modifying the form below."})]}),(0,a.jsx)("div",{className:"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl md:col-span-2",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:p-8",children:(0,a.jsx)(r.A,{initialData:j,onSubmit:p,isEdit:!0})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,568,441,517,358],()=>t(7203)),_N_E=e.O()}]);