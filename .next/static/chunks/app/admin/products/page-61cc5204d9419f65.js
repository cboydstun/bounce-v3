(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{1796:(e,t,s)=>{Promise.resolve().then(s.bind(s,8170))},8170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),l=s(2115),r=s(8173),i=s.n(r),c=s(9395),n=s(8056),o=s(3406);function d(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(null),[d,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{m(!0);let e=await n.Ay.get("".concat(o.J).concat(o.Q.PRODUCTS));t(e.data)}catch(e){r(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}})()},[]);let x=async s=>{if(window.confirm("Are you sure you want to delete this product?"))try{if(m(!0),!localStorage.getItem("auth_token")){r("Authentication required. Please log in.");return}await n.Ay.delete("".concat(o.J).concat(o.Q.PRODUCTS,"/").concat(s)),t(e.filter(e=>e.slug!==s))}catch(e){console.error("Delete error:",e),e instanceof Error&&e.message.includes("401")?r("Authentication failed. Please log in again."):r(e instanceof Error?e.message:"Failed to delete product")}finally{m(!1)}},u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency}).format(e.base);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-center",children:[(0,a.jsxs)("div",{className:"sm:flex-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold leading-6 text-gray-900",children:"Products"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all products including their name, price, category, and status."})]}),(0,a.jsx)("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none",children:(0,a.jsx)(i(),{href:"/admin/products/new",className:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Add Product"})})]}),s&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 text-red-700 rounded-md",children:[s,s.toLowerCase().includes("log in")&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(i(),{href:"/login",className:"text-sm font-medium text-red-800 underline hover:text-red-600",children:"Go to Login"})})]}),d?(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)(c.k,{className:"w-8 h-8"})}):(0,a.jsx)("div",{className:"mt-8 flow-root",children:(0,a.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,a.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Price"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Category"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,a.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,a.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:e.name}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:u(e.price)}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.category}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("available"===e.availability?"bg-green-100 text-green-800":"rented"===e.availability?"bg-blue-100 text-blue-800":"maintenance"===e.availability?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.availability.charAt(0).toUpperCase()+e.availability.slice(1)})}),(0,a.jsxs)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:[(0,a.jsx)(i(),{href:"/admin/products/".concat(e.slug,"/edit"),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>x(e.slug),className:"text-red-600 hover:text-red-900",disabled:d,children:d?(0,a.jsx)(c.k,{className:"w-4 h-4"}):"Delete"})]})]},e._id))})]})})})})})]})}},9395:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var a=s(5155);function l(e){let{className:t="w-4 h-4"}=e;return(0,a.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},3406:(e,t,s)=>{"use strict";s.d(t,{J:()=>a,Q:()=>l});let a="http://localhost:8080",l={PRODUCTS:"/api/v1/products",BLOGS:"/api/v1/blogs",USERS:"/api/v1/users",CONTACTS:"/api/v1/contacts"}},8056:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n,iD:()=>i});var a=s(2651),l=s(3406);let r=a.A.create({baseURL:l.J,headers:{"Content-Type":"application/json"}}),i=async e=>{let t=await r.post("/api/v1/users/login",e);return c(t.data.token),t.data};r.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t,s;return Promise.reject(Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"An unexpected error occurred"))});let c=e=>{e?(localStorage.setItem("auth_token",e),r.defaults.headers.common.Authorization="Bearer ".concat(e)):(localStorage.removeItem("auth_token"),delete r.defaults.headers.common.Authorization)},n=r}},e=>{var t=t=>e(e.s=t);e.O(0,[651,173,441,517,358],()=>t(1796)),_N_E=e.O()}]);