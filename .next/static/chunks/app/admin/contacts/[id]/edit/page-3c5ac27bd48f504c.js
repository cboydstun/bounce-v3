(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{5924:(e,a,s)=>{Promise.resolve().then(s.bind(s,6075))},6046:(e,a,s)=>{"use strict";var n=s(6658);s.o(n,"usePathname")&&s.d(a,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(a,{useRouter:function(){return n.useRouter}})},6075:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var n=s(5155),r=s(2115),t=s(6046),c=s(9395),o=s(3406);function l(e){let{params:a}=e,s=(0,t.useRouter)(),l=r.use(a),[i,d]=(0,r.useState)({bouncer:"",email:"",phone:"",partyDate:"",partyZipCode:"",message:"",confirmed:!1,tablesChairs:!1,generator:!1,popcornMachine:!1,cottonCandyMachine:!1,snowConeMachine:!1,overnight:!1,margaritaMachine:!1,slushyMachine:!1}),[u,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{h(!0);let e=localStorage.getItem("auth_token"),a=await fetch("".concat(o.J).concat(o.Q.CONTACTS,"/").concat(l.id),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch contact");let s=await a.json(),n=s.partyDate?new Date(s.partyDate).toISOString().split("T")[0]:"";d({bouncer:s.bouncer,email:s.email,phone:s.phone||"",partyDate:n,partyZipCode:s.partyZipCode,message:s.message||"",confirmed:s.confirmed,tablesChairs:s.tablesChairs||!1,generator:s.generator||!1,popcornMachine:s.popcornMachine||!1,cottonCandyMachine:s.cottonCandyMachine||!1,snowConeMachine:s.snowConeMachine||!1,overnight:s.overnight||!1,margaritaMachine:s.margaritaMachine||!1,slushyMachine:s.slushyMachine||!1})}catch(e){x(e instanceof Error?e.message:"An error occurred"),console.error("Error fetching contact:",e)}finally{h(!1)}})()},[l.id]);let b=async e=>{e.preventDefault();try{h(!0);let e=localStorage.getItem("auth_token");if(!e){s.push("/login");return}let a=await fetch("".concat(o.J).concat(o.Q.CONTACTS,"/").concat(l.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(i)});if(401===a.status){localStorage.removeItem("auth_token"),s.push("/login");return}if(!a.ok)throw Error("Failed to update contact");s.push("/admin/contacts"),s.refresh()}catch(e){x(e instanceof Error?e.message:"Failed to update contact"),console.error("Error updating contact:",e)}finally{h(!1)}},g=e=>{let{name:a,value:s,type:n}=e.target;d(r=>({...r,[a]:"checkbox"===n?e.target.checked:s}))};return u?(0,n.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,n.jsx)(c.k,{className:"w-8 h-8"})}):(0,n.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"Edit Contact Request"}),m&&(0,n.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-md",children:m}),(0,n.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Bouncer Name",(0,n.jsx)("input",{type:"text",name:"bouncer",value:i.bouncer,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Email",(0,n.jsx)("input",{type:"email",name:"email",value:i.email,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Phone",(0,n.jsx)("input",{type:"tel",name:"phone",value:i.phone,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Party Date",(0,n.jsx)("input",{type:"date",name:"partyDate",value:i.partyDate,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Party Zip Code",(0,n.jsx)("input",{type:"text",name:"partyZipCode",value:i.partyZipCode,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Status",(0,n.jsxs)("select",{name:"confirmed",value:i.confirmed.toString(),onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"false",children:"Pending"}),(0,n.jsx)("option",{value:"true",children:"Confirmed"})]})]})})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Message",(0,n.jsx)("textarea",{name:"message",value:i.message,onChange:g,rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium",children:"Additional Services"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"tablesChairs",checked:i.tablesChairs,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Tables & Chairs"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"generator",checked:i.generator,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Generator"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"popcornMachine",checked:i.popcornMachine,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Popcorn Machine"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"cottonCandyMachine",checked:i.cottonCandyMachine,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Cotton Candy Machine"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"snowConeMachine",checked:i.snowConeMachine,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Snow Cone Machine"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"margaritaMachine",checked:i.margaritaMachine,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Margarita Machine"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"slushyMachine",checked:i.slushyMachine,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Slushy Machine"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"overnight",checked:i.overnight,onChange:g,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{children:"Overnight"})]})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>s.back(),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:u?(0,n.jsx)(c.k,{className:"w-5 h-5"}):"Save Changes"})]})]})]})}},9395:(e,a,s)=>{"use strict";s.d(a,{k:()=>r});var n=s(5155);function r(e){let{className:a="w-4 h-4"}=e;return(0,n.jsxs)("svg",{className:"animate-spin ".concat(a),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},3406:(e,a,s)=>{"use strict";s.d(a,{J:()=>n,Q:()=>r});let n="http://localhost:8080",r={PRODUCTS:"/api/v1/products",BLOGS:"/api/v1/blogs",USERS:"/api/v1/users",CONTACTS:"/api/v1/contacts"}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(5924)),_N_E=e.O()}]);