(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{8980:(e,t,s)=>{Promise.resolve().then(s.bind(s,4240))},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1964:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),i=s(2115),r=s(9395);function o(e){var t;let{initialData:s,onSubmit:o,isEdit:n=!1}=e,[l,d]=(0,i.useState)(s||{title:"",slug:"",author:{_id:"",email:""},introduction:"",body:"",conclusion:"",images:[],excerpt:"",featuredImage:"",categories:[],tags:[],status:"draft",publishDate:void 0,lastModified:void 0,comments:[],meta:{views:0,likes:0,shares:0},seo:{metaTitle:"",metaDescription:"",focusKeyword:""},readTime:0,isFeature:!1,relatedPosts:[],createdAt:void 0,updatedAt:void 0}),[c,u]=(0,i.useState)(!1),[m,g]=(0,i.useState)(""),x=async e=>{e.preventDefault(),g(""),u(!0);try{await o(l)}catch(e){g(e instanceof Error?e.message:"An error occurred while saving")}finally{u(!1)}};return(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[m&&(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:m})})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium leading-6 text-gray-900",children:"Title"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"text",id:"title",value:l.title,onChange:e=>d({...l,title:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium leading-6 text-gray-900",children:"Slug"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"text",id:"slug",value:l.slug,onChange:e=>d({...l,slug:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"author",className:"block text-sm font-medium leading-6 text-gray-900",children:"Author Email"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"text",id:"author",value:(null===(t=l.author)||void 0===t?void 0:t.email)||"No author assigned",disabled:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 bg-gray-100"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"introduction",className:"block text-sm font-medium leading-6 text-gray-900",children:"Introduction"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("textarea",{id:"introduction",rows:3,value:l.introduction,onChange:e=>d({...l,introduction:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"body",className:"block text-sm font-medium leading-6 text-gray-900",children:"Body"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("textarea",{id:"body",rows:10,value:l.body,onChange:e=>d({...l,body:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"conclusion",className:"block text-sm font-medium leading-6 text-gray-900",children:"Conclusion"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("textarea",{id:"conclusion",rows:3,value:l.conclusion,onChange:e=>d({...l,conclusion:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"categories",className:"block text-sm font-medium leading-6 text-gray-900",children:"Categories (comma-separated)"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"text",id:"categories",value:l.categories.join(", "),onChange:e=>d({...l,categories:e.target.value.split(",").map(e=>e.trim())}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium leading-6 text-gray-900",children:"Tags (comma-separated)"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"text",id:"tags",value:l.tags.join(", "),onChange:e=>d({...l,tags:e.target.value.split(",").map(e=>e.trim())}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium leading-6 text-gray-900",children:"Status"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("select",{id:"status",value:l.status,onChange:e=>d({...l,status:e.target.value}),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"published",children:"Published"}),(0,a.jsx)("option",{value:"archived",children:"Archived"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"isFeature",className:"block text-sm font-medium leading-6 text-gray-900",children:"Featured Post"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"checkbox",id:"isFeature",checked:l.isFeature,onChange:e=>d({...l,isFeature:e.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:c?(0,a.jsx)(r.k,{className:"w-5 h-5"}):n?"Update Blog Post":"Create Blog Post"})]})]})}},4240:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),i=s(2115),r=s(6046),o=s(1964),n=s(9395),l=s(8056),d=s(3406);function c(e){let{params:t}=e,s=(0,r.useRouter)(),[c,u]=(0,i.useState)(null),[m,g]=(0,i.useState)(!0),[x,h]=(0,i.useState)(""),y=i.use(t);(0,i.useEffect)(()=>{(async()=>{try{let e=await l.Ay.get("".concat(d.J).concat(d.Q.BLOGS,"/").concat(y.id)),t={...e.data,_id:e.data._id,categories:e.data.categories||[],tags:e.data.tags||[],meta:e.data.meta||{views:0,likes:0,shares:0},isFeature:e.data.isFeature||!1,comments:e.data.comments||[],readTime:e.data.readTime||0,relatedPosts:e.data.relatedPosts||[],createdAt:e.data.createdAt,updatedAt:e.data.updatedAt,seo:e.data.seo||{metaTitle:"",metaDescription:"",focusKeyword:""}};u(t)}catch(e){h(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}})()},[y.id]);let f=async e=>{try{let t={...e,categories:Array.isArray(e.categories)?e.categories.join(","):e.categories,tags:Array.isArray(e.tags)?e.tags.join(","):e.tags};await l.Ay.put("".concat(d.J).concat(d.Q.BLOGS,"/").concat(y.id),t),s.push("/admin/blogs")}catch(e){if(e instanceof Error)throw e;throw Error("Failed to update blog post")}};return m?(0,a.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,a.jsx)(n.k,{className:"w-8 h-8"})}):x?(0,a.jsxs)("div",{className:"text-center text-red-600 p-4",children:[(0,a.jsxs)("p",{children:["Error: ",x]}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 text-indigo-600 hover:text-indigo-900",children:"Try Again"})]}):(0,a.jsxs)("div",{className:"py-10 px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"sm:flex sm:items-center",children:(0,a.jsxs)("div",{className:"sm:flex-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold leading-6 text-gray-900",children:"Edit Blog Post"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Make changes to the blog post below."})]})}),(0,a.jsx)("div",{className:"mt-8",children:c&&(0,a.jsx)(o.A,{initialData:c,onSubmit:f,isEdit:!0})})]})}},9395:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var a=s(5155);function i(e){let{className:t="w-4 h-4"}=e;return(0,a.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},3406:(e,t,s)=>{"use strict";s.d(t,{J:()=>a,Q:()=>i});let a="http://localhost:8080",i={PRODUCTS:"/api/v1/products",BLOGS:"/api/v1/blogs",USERS:"/api/v1/users",CONTACTS:"/api/v1/contacts"}},8056:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>l,iD:()=>o});var a=s(2651),i=s(3406);let r=a.A.create({baseURL:i.J,headers:{"Content-Type":"application/json"}}),o=async e=>{let t=await r.post("/api/v1/users/login",e);return n(t.data.token),t.data};r.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t,s;return Promise.reject(Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"An unexpected error occurred"))});let n=e=>{e?(localStorage.setItem("auth_token",e),r.defaults.headers.common.Authorization="Bearer ".concat(e)):(localStorage.removeItem("auth_token"),delete r.defaults.headers.common.Authorization)},l=r}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(8980)),_N_E=e.O()}]);